<div fxLayout="column" fxLayoutGap="10px">
    <div fxLayout fxLayoutGap="10px">
        <ng-container [formGroup]="dateForm">
            <mat-form-field class="m-l-10" [appearance]="appearance" (click)="dp.open()">
                <mat-label>{{ 'POINT_ENTRY.DATE' | translate }}</mat-label>
                <input matInput readonly formControlName="date" [matDatepicker]="dp">
                <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>
                <mat-datepicker #dp>
                </mat-datepicker>
            </mat-form-field>
            <div fxLayout fxLayoutAlign="center center">
                <button (click)="fetchData()" fxHide.lt-md mat-raised-button color="primary">Apply</button>
                <button (click)="fetchData()" class="m-b-25" fxHide.gt-sm mat-mini-fab color="primary">
                    <mat-icon>refresh</mat-icon>
                </button>
            </div>
        </ng-container>
    </div>
    <div fxLayout fxLayoutAlign="center center">
        <ng-container *ngIf="!fetchingData; else fetchingTpl">
            <expand-table @fadeIn *ngIf="points?.length; else emptyTpl" fxFlex [columns]="columns" [dataSource]="pointDataSource">
                <ng-container *expandDetails="let point">
                    <div fxLayout="column" class="m-t-10 m-b-10 width-100" fxLayoutGap="10px">
                        <div fxLayout fxLayoutGap="10px">
                            <div class="bold  font-12" fxFlex="30">{{ 'POINT_ENTRY.COL.POINT_NO' | translate}}</div>
                            <div class="bold">:</div>
                            <div class="text-transform-upper">{{ point?.pointno }}</div>
                        </div>
                        <div fxLayout fxLayoutGap="10px">
                            <div class="bold font-12" fxFlex="30">{{ 'POINT_ENTRY.COL.RIG' | translate }}</div>
                            <div class="bold">:</div>
                            <div>{{ point?.rig }}</div>
                        </div>
                        <div fxLayout fxLayoutGap="10px">
                            <div class="bold font-12" fxFlex="30">{{ 'POINT_ENTRY.COL.BORE_TYPE' | translate }}</div>
                            <div class="bold">:</div>
                            <div>{{ point?.boreType }}</div>
                        </div>
                        <div fxLayout fxLayoutGap="10px">
                            <div class="bold font-12" fxFlex="30">{{ 'POINT_ENTRY.CASING_TYPE' | translate }}</div>
                            <div class="bold">:</div>
                            <div>{{ point?.casingType }}</div>
                        </div>
                        <div fxLayout fxLayoutGap="10px">
                            <div class="bold font-12" fxFlex="30">{{ 'POINT_ENTRY.DATE' | translate }}</div>
                            <div class="bold">:</div>
                            <div>{{ point?.date }}</div>
                        </div>
                        <div fxLayout fxLayoutGap="10px">
                            <div class="bold font-12" fxFlex="30">{{ 'POINT_ENTRY.PARTY_NAME' | translate }}</div>
                            <div class="bold">:</div>
                            <div>{{ point?.partyName }}</div>
                        </div>
                        <div fxLayout fxLayoutGap="10px">
                            <div class="bold font-12" fxFlex="30">{{ 'POINT_ENTRY.PARTY_MOBILE_NUMBER' | translate }}</div>
                            <div class="bold">:</div>
                            <div>{{ point?.partyMobile }}</div>
                        </div>
                        <div fxLayout fxLayoutGap="10px">
                            <div class="bold font-12" fxFlex="30">{{ 'POINT_ENTRY.COL.PARTY_STATE' | translate }}</div>
                            <div class="bold">:</div>
                            <div>{{ point?.partyState }}</div>
                        </div>
                        <div fxLayout fxLayoutGap="10px">
                            <div class="bold font-12" fxFlex="30">{{ 'POINT_ENTRY.PARTY_CITY' | translate }}</div>
                            <div class="bold">:</div>
                            <div>{{ point?.partyCity }}</div>
                        </div>
                        <div class="header" fxLayout="column" fxLayoutAlign="center center">{{
                            'POINT_ENTRY.POINT_ENTRY.TITLE' | translate }}</div>
                        <div fxLayout="column" fxLayoutGap="10px">
                            <div fxLayout fxLayoutGap="10px" class="bold col-header">
                                <div class="text-center" fxFlex="17.5">Start Ft.</div>
                                <div fxFlex="1">-</div>
                                <div class="text-center" fxFlex="17.5">End Ft.</div>
                                <div fxFlex="17.5">Total Ft.</div>
                                <div fxFlex="1">x</div>
                                <div fxFlex="17.5">Amt. Per Ft.</div>
                                <div fxFlex="1">=</div>
                                <div fxFlex="100">Amt.</div>
                            </div>
                            <div class="line m-t-5"></div>
                            <div fxLayout="column">
                                <ng-container *ngFor="let feet of point.feets | nullFilter; let last = last">
                                    <div fxLayout fxLayoutGap="10px">
                                        <div class="text-center" fxFlex="17.5">{{ feet.startFeet }}</div>
                                        <div fxFlex="1">-</div>
                                        <div class="text-center" fxFlex="17.5">{{ feet.endFeet }}</div>
                                        <div fxFlex="17.5">{{ feet.totalFeet }}</div>
                                        <div fxFlex="1">x</div>
                                        <div fxFlex="17.5">{{ feet.amtPerFeet }}</div>
                                        <div fxFlex="1">=</div>
                                        <div class="text-right" fxFlex="100">{{ feet.amt }}</div>
                                    </div>
                                    <div *ngIf="!last" class="dashed m-t-5 m-b-5"></div>
                                </ng-container>
                            </div>
                        </div>
                    </div>
                </ng-container>
            </expand-table>
        </ng-container>
    </div>
</div>

<ng-template #fetchingTpl>
    <div class="spinner-container">
        <mat-spinner diameter="40" strokeWidth="2"></mat-spinner>
    </div>
</ng-template>




<ng-template #emptyTpl>
    <mat-card>
        <mat-card-content>No Point found for the selected date.</mat-card-content>
    </mat-card>
</ng-template>